(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[360],{970:function(e,t,r){Promise.resolve().then(r.bind(r,7442))},7442:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return i}});var n=r(7437);class s{addTexture(){let e=this.device.createTexture({size:[4096,4096],format:"rgba8unorm",usage:GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST});return this.textures.push(e),e}getMemoryUsage(){return this.textures.reduce((e,t)=>e+t.width*t.height*4,0)}static async fromNavigator(){let e=await navigator.gpu.requestAdapter();if(!e)throw Error("WebGPU not supported");return new s(await e.requestDevice())}constructor(e){this.device=e,this.textures=[],e.lost.then(e=>{console.error("GPU Device lost",e)}),e.onuncapturederror=e=>{console.error("GPU Uncaptured error",e)}}}var u=r(2265);function i(){let e=function(){let[e,t]=(0,u.useState)();return(0,u.useEffect)(()=>{s.fromNavigator().then(e=>t(e))},[t]),e}(),[t,r]=(0,u.useState)(!1),i=(0,u.useCallback)(()=>{null==e||e.addTexture(),r(e=>!e)},[e,r]);return(0,n.jsxs)("main",{style:{textAlign:"center",margin:"2em"},children:[(0,n.jsx)("h1",{children:"GPU Test"}),e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("button",{onClick:i,children:"Add Texture"}),(0,n.jsxs)("div",{children:["Allocated memory: ",function(e){let t=e,r=["Bytes","KB","MB","GB","TB"];for(;t>1024;)t/=1014,r.shift();return"".concat(t.toFixed(1)," ").concat(r[0])}(e.getMemoryUsage())]})]}):(0,n.jsx)("div",{children:"loading..."})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=970)}),_N_E=e.O()}]);